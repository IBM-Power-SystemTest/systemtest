{% extends 'pts/base.html' %}
{% load humanize %}
{% load static %}
{% load shift %}

{% block subtitle %} Request List {% endblock subtitle %}

{% block container %}
  <form method="post">
    {% csrf_token %}
    {{ form.management_form }}
    <table>
      <thead>
        <tr>
          <th> Folio </th>
          <th> Status </th>
          <th> Hora </th>
          <th> Turno </th>
          <th> Parte </th>
          <th> Descripcion </th>
          <th> Loaner </th>
          <th> Sistema </th>
          <th> Celda </th>
          <th> Usuario </th>
          {% block extra_columns %}
          {% endblock extra_columns %}
        </tr>
      </thead>
      <tbody>
      {% for data, form in rows %}
        {{ form.id }}
        {{ form.errors }}
        <tr>
          <td> {{ data.pk }} </td>
          <td> {{ data.request_status }} </td>
          <td> {{ data.modified | timesince }} </td>
          <td> {{ data.modified | get_shift }}</td>
          <td> {{ data.part_number }} </td>
          <td> {{ data.request_group.part_description }} </td>
          {% if data.request_group.is_loaner %}
            <td>
              <img src="{% static 'images/icons/true.png' %}" alt="">
            </td>
          {% else %}
            <td></td>
          {% endif %}
          <td> {{ data.request_group.system_number }} </td>
          <td> {{ data.request_group.system_cell }} </td>
          <td> {{ data.user }} </td>
          {% block extra_rows %}
          {% endblock extra_rows %}
        </tr>
      {% empty %}
      {% endfor %}
      </tbody>
    </table>
    {% block submit %}{% endblock submit %}
  </form>
{% endblock container %}
